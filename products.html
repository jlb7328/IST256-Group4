<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="styles.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
  </head>
<body>
    <header>
        <h1>Products</h1>
        <p>Created by Group 4</p>
    </header>
    <nav aria-label="Main Navigation">
        <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="shopping_cart.html">Shopping Cart</a></li>
        <li><a href="about_us.html">About Us</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="sign_up.html" class="signup-btn">Sign Up</a></li>
        </ul>
    </nav>
    <main>
        <section>
        <h2>Our Products</h2>
        <p>Explore our wide range of products below.</p>

        <!-- Search bar -->
        <label for="search-product">Search Products:</label>
        <input id="search-product" type="text" placeholder="Search products..."/>
        <div id="search-result" class="mt-3"></div>

        <ul id="product-list"></ul>

        </section>
    </main>
    <footer>
        <p>&copy; 2025 Group 4. All Rights Reserved.</p>
    </footer>
        <script>
            let productData = [];

            function renderProductList(products) {
                $("#product-list").empty();
                products.forEach(product => {
                    $("#product-list").append(`
                        <li>
                            <h3>${product.name}</h3>
                            <p>${product.description}</p>
                            <p><strong>Category:</strong> ${product.category}</p>
                            <p><strong>Unit:</strong> ${product.unit}</p>
                            <p><strong>Price:</strong> ${product.price}</p>
                            ${product.image ? `<img src="${product.image}" alt="${product.name}" style="max-width:150px;">` : ""}
                        </li>
                    `);
                });
            }

    $(document).ready(function() {
        // Load products from JSON file
        $.getJSON("products.json", function(data) {
            productData = data;
            renderProductList(productData);

        // Build autocomplete array
        let productNames = data.map(p => p.name);
        $("#search-product").autocomplete({
          source: productNames,
          select: function(event, ui) {
            let selected = data.find(p => p.name === ui.item.value);
            if (selected) {
              $("#search-result").html(`
                <div>
                  <h3>${selected.name}</h3>
                  <p>${selected.description}</p>
                  <p><strong>Category:</strong> ${selected.category}</p>
                  <p><strong>Unit:</strong> ${selected.unit}</p>
                  <p><strong>Price:</strong> ${selected.price}</p>
                  ${selected.image ? `<img src="${selected.image}" alt="${selected.name}" style="max-width:150px;">` : ""}
                </div>
              `);
              $("html, body").animate({
                scrollTop: $("#search-result").offset().top
              }, 500);
            }
          }
        });
      });
    });

    </script>
</body>
</html>
